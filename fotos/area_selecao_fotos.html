<h1>Página de seleção de fotos em construção!</h1>

<div class='alert alert-primary' role='alert' style='margin-top: 10px;'>
    <div class="row">
        <div class="col-12">
            <p class="text-center" style="font-size: 30px;">Seleção de fotos</p>
        </div>
    </div>
    <div class="btn-group" role="group" aria-label="...">
        <button type='button' class='btn btn-primary' data-toggle='modal' data-target='#modalAdicionarFotos'>Adicionar Fotos</button>
    </div>
    <div class="row d-flex justify-content-center">
        <div class="col-12 col-sm-6">
            <div id="carouselSelecaoFotos" class="carousel slide" data-ride="carousel">
                <ol class="carousel-indicators">

                </ol>
                <div class="carousel-inner">

                </div>
                <button class="carousel-control-prev" type="button" data-target="#carouselSelecaoFotos" data-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="sr-only">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-target="#carouselSelecaoFotos" data-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="sr-only">Next</span>
                </button>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    const firebaseConfig = {
        apiKey: "AIzaSyC_Lz-HIXHPz90MM_8vERto3dUK1rGts44",
        authDomain: "igreja-batista-campos-brancos.firebaseapp.com",
        databaseURL: "https://igreja-batista-campos-brancos-default-rtdb.firebaseio.com",
        projectId: "igreja-batista-campos-brancos",
        storageBucket: "igreja-batista-campos-brancos.appspot.com",
        messagingSenderId: "724470922283",
        appId: "1:724470922283:web:fcf1eaf1f43df1d48dfe6e",
        measurementId: "G-WKZFS0PDDY"
    };

    if(!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
    }

    const auth = firebase.auth();
    const provider = new firebase.auth.GoogleAuthProvider();
    const db = firebase.firestore();
    const storage = firebase.storage();

    db.collection("fotos_carousel_main_pagina_home").orderBy("storage_ref").onSnapshot((data) => {
        
        let contFotos = 0;

        data.docs.map((val) => {
            let storage_ref = val.data().storage_ref;
            let url_foto = val.data().url_foto;

            let $indicator = "<li data-target='#carouselSelecaoFotos' data-slide-to='";
            $indicator += contFotos + "'";
            if(contFotos == 0) $indicator += " class='active'";
            $indicator += "></li>";

            $innerItem = "<div class='carousel-item";
            if(contFotos == 0) $innerItem += " active";
            $innerItem += "'>";
            $innerItem += "<img src='" + url_foto + "' storage_ref='" + storage_ref + "' class='d-block w-100' alt='...'>";
            $innerItem += "</div>";

            $("#carouselSelecaoFotos>.carousel-indicators").append($indicator);
            $("#carouselSelecaoFotos>.carousel-inner").append($innerItem);

            contFotos++;
        });

    });
</script>